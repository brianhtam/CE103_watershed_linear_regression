clear; close all; clc;
data_tourist=load('norm_ppl.mat');
data_rainfall=load('yosemite_prc.mat');
% tourist
tourist=data_tourist.norm_ppl(:,2:13);
% rainfall
for i=1:12830
    if data_rainfall.yosemite_prc(i,2)==-9999
        data_rainfall.yosemite_prc(i,2)=0;
    end
end


% rainfall February
minVal=[19790201 19800201 19810201 19820201 19830201 19840201 19850201 19860201 19860201 19870201 19880201 19890201 19900201 19910201 19920201 19930201 19940201 19950201 19960201 19970201 19980201 19990201 20000201 20010201 20020201 20030201 20040201 20050201 20060201 20070201 20080201 20090201 20100201 20110201 20120201 20130201 20140201 20150201 20160201];
maxVal=[19790231 19800231 19810231 19820231 19830231 19840231 19850231 19860231 19860231 19870231 19880231 19890201 19900231 19910231 19920231 19930231 19940231 19950231 19960231 19970231 19980231 19990231 20000231 20010231 20020231 20030231 20040231 20050231 20060231 20070231 20080201 20090231 20100231 20110231 20120231 20130231 20140231 20150231 20160231];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_february(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_february(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall02(i)=length(nonzeros(rainfall_february(:,2,i)));
end

figure;
plotregression(total_rainfall02,tourist(:,2)/10000);
legend('Y=X','February');
% rainfall October
minVal=[19791001 19801001 19811001 19821001 19831001 19841001 19851001 19861001 19861001 19871001 19881001 19891001 19901001 19911001 19921001 19931001 19941001 19951001 19961001 19971001 19981001 19991001 20001001 20011001 20021001 20031001 20041001 20051001 20061001 20071001 20081001 20091001 20101001 20111001 20121001 20131001 20141001 20151001 20161001];
maxVal=[19791031 19801031 19811031 19821031 19831031 19841031 19851031 19861031 19861031 19871031 19881031 19891001 19901031 19911031 19921031 19931031 19941031 19951031 19961031 19971031 19981031 19991031 20001031 20011031 20021031 20031031 20041031 20051031 20061031 20071031 20081001 20091031 20101031 20111031 20121031 20131031 20141031 20151031 20161031];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_october(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_october(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall10(i,1)=length(nonzeros(rainfall_october(:,2,i)));
end
figure;
plotregression(total_rainfall10,tourist(:,10)/10000);
legend('Y=X','October');

% rainfall May
minVal=[19790501 19800501 19810501 19820501 19830501 19840501 19850501 19860501 19860501 19870501 19880501 19890501 19900501 19910501 19920501 19930501 19940501 19950501 19960501 19970501 19980501 19990501 20000501 20010501 20020501 20030501 20040501 20050501 20060501 20070501 20080501 20090501 20100501 20110501 20120501 20130501 20140501 20150501 20160501];
maxVal=[19790531 19800531 19810531 19820531 19830531 19840531 19850531 19860531 19860531 19870531 19880531 19890501 19900531 19910531 19920531 19930531 19940531 19950531 19960531 19970531 19980531 19990531 20000531 20010531 20020531 20030531 20040531 20050531 20060531 20070531 20080501 20090531 20100531 20110531 20120531 20130531 20140531 20150531 20160531];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_may(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_may(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall05(i,1)=length(nonzeros(rainfall_may(:,2,i)));
end
figure;
plotregression(total_rainfall05,tourist(:,5)/10000);
legend('Y=X','May');
% rainfall June
minVal=[19790601 19800601 19810601 19820601 19830601 19840601 19850601 19860601 19860601 19870601 19880601 19890601 19900601 19910601 19920601 19930601 19940601 19950601 19960601 19970601 19980601 19990601 20000601 20010601 20020601 20030601 20040601 20050601 20060601 20070601 20080601 20090601 20100601 20110601 20120601 20130601 20140601 20150601 20160601];
maxVal=[19790631 19800631 19810631 19820631 19830631 19840631 19850631 19860631 19860631 19870631 19880631 19890601 19900631 19910631 19920631 19930631 19940631 19950631 19960631 19970631 19980631 19990631 20000631 20010631 20020631 20030631 20040631 20050631 20060631 20070631 20080601 20090631 20100631 20110631 20120631 20130631 20140631 20150631 20160631];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_june(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_june(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall06(i,1)=length(nonzeros(rainfall_june(:,2,i)));
end
figure;
plotregression(total_rainfall06,tourist(:,6)/10000);
legend('Y=X','June');
% rainfall July
minVal=[19790701 19800701 19810701 19820701 19830701 19840701 19850701 19860701 19860701 19870701 19880701 19890701 19900701 19910701 19920701 19930701 19940701 19950701 19960701 19970701 19980701 19990701 20000701 20010701 20020701 20030701 20040701 20050701 20060701 20070701 20080701 20090701 20100701 20110701 20120701 20130701 20140701 20150701 20160701];
maxVal=[19790731 19800731 19810731 19820731 19830731 19840731 19850731 19860731 19860731 19870731 19880731 19890701 19900731 19910731 19920731 19930731 19940731 19950731 19960731 19970731 19980731 19990731 20000731 20010731 20020731 20030731 20040731 20050731 20060731 20070731 20080701 20090731 20100731 20110731 20120731 20130731 20140731 20150731 20160731];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_july(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_july(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall07(i,1)=length(nonzeros(rainfall_july(:,2,i)));
end
figure;
plotregression(total_rainfall07,tourist(:,7)/10000);
legend('Y=X','July');
% rainfall August
minVal=[19790801 19800801 19810801 19820801 19830801 19840801 19850801 19860801 19860801 19870801 19880801 19890801 19900801 19910801 19920801 19930801 19940801 19950801 19960801 19970801 19980801 19990801 20000801 20010801 20020801 20030801 20040801 20050801 20060801 20070801 20080801 20090801 20100801 20110801 20120801 20130801 20140801 20150801 20160801];
maxVal=[19790831 19800831 19810831 19820831 19830831 19840831 19850831 19860831 19860831 19870831 19880831 19890801 19900831 19910831 19920831 19930831 19940831 19950831 19960831 19970831 19980831 19990831 20000831 20010831 20020831 20030831 20040831 20050831 20060831 20070831 20080801 20090831 20100831 20110831 20120831 20130831 20140831 20150831 20160831];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_august(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_august(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall08(i,1)=length(nonzeros(rainfall_august(:,2,i)));
end
figure;
plotregression(total_rainfall08,tourist(:,8)/10000);
legend('Y=X','August');
% rainfall September
minVal=[19790901 19800901 19810901 19820901 19830901 19840901 19850901 19860901 19860901 19870901 19880901 19890901 19900901 19910901 19920901 19930901 19940901 19950901 19960901 19970901 19980901 19990901 20000901 20010901 20020901 20030901 20040901 20050901 20060901 20070901 20080901 20090901 20100901 20110901 20120901 20130901 20140901 20150901 20160901];
maxVal=[19790931 19800931 19810931 19820931 19830931 19840931 19850931 19860931 19860931 19870931 19880931 19890901 19900931 19910931 19920931 19930931 19940931 19950931 19960931 19970931 19980931 19990931 20000931 20010931 20020931 20030931 20040931 20050931 20060931 20070931 20080901 20090931 20100931 20110931 20120931 20130931 20140931 20150931 20160931];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_september(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_september(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall09(i,1)=length(nonzeros(rainfall_september(:,2,i)));
end
figure;
plotregression(total_rainfall09,tourist(:,9)/10000);
legend('Y=X','September');
% rainfall November
minVal=[19791101 19801101 19811101 19821101 19831101 19841101 19851101 19861101 19861101 19871101 19881101 19891101 19901101 19911101 19921101 19931101 19941101 19951101 19961101 19971101 19981101 19991101 20001101 20011101 20021101 20031101 20041101 20051101 20061101 20071101 20081101 20091101 20101101 20111101 20121101 20131101 20141101 20151101 20161101];
maxVal=[19791131 19801131 19811131 19821131 19831131 19841131 19851131 19861131 19861131 19871131 19881131 19891101 19901131 19911131 19921131 19931131 19941131 19951131 19961131 19971131 19981131 19991131 20001131 20011131 20021131 20031131 20041131 20051131 20061131 20071131 20081101 20091131 20101131 20111131 20121131 20131131 20141131 20151131 20161131];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_november(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_november(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall11(i,1)=length(nonzeros(rainfall_november(:,2,i)));
end
figure;
plotregression(total_rainfall11,tourist(:,11)/10000);
legend('Y=X','November');
% rainfall December
minVal=[19791201 19801201 19811201 19821201 19831201 19841201 19851201 19861201 19861201 19871201 19881201 19891201 19901201 19911201 19921201 19931201 19941201 19951201 19961201 19971201 19981201 19991201 20001201 20011201 20021201 20031201 20041201 20051201 20061201 20071201 20081201 20091201 20101201 20111201 20121201 20131201 20141201 20151201 20161201];
maxVal=[19791231 19801231 19811231 19821231 19831231 19841231 19851231 19861231 19861231 19871231 19881231 19891201 19901231 19911231 19921231 19931231 19941231 19951231 19961231 19971231 19981231 19991231 20001231 20011231 20021231 20031231 20041231 20051231 20061231 20071231 20081201 20091231 20101231 20111231 20121231 20131231 20141231 20151231 20161231];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_december(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_december(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall12(i,1)=length(nonzeros(rainfall_november(:,2,i)));
end
figure;
plotregression(total_rainfall12,tourist(:,12)/10000);
legend('Y=X','December');
% rainfall January
minVal=[19790101 19800101 19810101 19820101 19830101 19840101 19850101 19860101 19860101 19870101 19880101 19890101 19900101 19910101 19920101 19930101 19940101 19950101 19960101 19970101 19980101 19990101 20000101 20010101 20020101 20030101 20040101 20050101 20060101 20070101 20080101 20090101 20100101 20110101 20120101 20130101 20140101 20150101 20160101];
maxVal=[19790131 19800131 19810131 19820131 19830131 19840131 19850131 19860131 19860131 19870131 19880131 19890101 19900131 19910131 19920131 19930131 19940131 19950131 19960131 19970131 19980131 19990131 20000131 20010131 20020131 20030131 20040131 20050131 20060131 20070131 20080101 20090131 20100131 20110131 20120131 20130131 20140131 20150131 20160131];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_january(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_january(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall01(i)=length(nonzeros(rainfall_january(:,2,i)));
end
figure;
plotregression(total_rainfall01,tourist(:,1)/10000);
legend('Y=X','January');

% rainfall March
minVal=[19790301 19800301 19810301 19820301 19830301 19840301 19850301 19860301 19860301 19870301 19880301 19890301 19900301 19910301 19920301 19930301 19940301 19950301 19960301 19970301 19980301 19990301 20000301 20010301 20020301 20030301 20040301 20050301 20060301 20070301 20080301 20090301 20100301 20110301 20120301 20130301 20140301 20150301 20160301];
maxVal=[19790331 19800331 19810331 19820331 19830331 19840331 19850331 19860331 19860331 19870331 19880331 19890301 19900331 19910331 19920331 19930331 19940331 19950331 19960331 19970331 19980331 19990331 20000331 20010331 20020331 20030331 20040331 20050331 20060331 20070331 20080301 20090331 20100331 20110331 20120331 20130331 20140331 20150331 20160331];
for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_march(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_march(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall03(i)=length(nonzeros(rainfall_march(:,2,i)));
end
figure;
plotregression(total_rainfall03,tourist(:,3)/10000);
legend('Y=X','March');
% rainfall April
minVal=[19790401 19800401 19810401 19820401 19830401 19840401 19850401 19860401 19860401 19870401 19880401 19890401 19900401 19910401 19920401 19930401 19940401 19950401 19960401 19970401 19980401 19990401 20000401 20010401 20020401 20030401 20040401 20050401 20060401 20070401 20080401 20090401 20100401 20110401 20120401 20130401 20140401 20150401 20160401];
maxVal=[19790431 19800431 19810431 19820431 19830431 19840431 19850431 19860431 19860431 19870431 19880431 19890401 19900431 19910431 19920431 19930431 19940431 19950431 19960431 19970431 19980431 19990431 20000431 20010431 20020431 20030431 20040431 20050431 20060431 20070431 20080401 20090431 20100431 20110431 20120431 20130431 20140431 20150431 20160431];   
 for j=1:38
for i=1:12830
    if data_rainfall.yosemite_prc(i,1)>=minVal(j) && data_rainfall.yosemite_prc(i,1)<=maxVal(j)
        rainfall_april(i,:,j)=data_rainfall.yosemite_prc(i,:);
    else
        rainfall_april(i,:,j)=[0 0];
    end
end
end
for i=1:38
    total_rainfall04(i)=length(nonzeros(rainfall_april(:,2,i)));
end
figure;
plotregression(total_rainfall04,tourist(:,3)/10000);
legend('Y=X','April');
